pico-8 cartridge // http://www.pico-8.com
version 35
__lua__

dx = 0
dy = 0
d = 1
nd = 1

mv_x = 0;
mv_y = 0;

mv=0
m_mv=8

spd = 1

btns={⬆️,⬇️,⬅️,➡️}

cur_btns = {}
prev_btns = {}
diff_btns = {}

function _update()
	update_btns()

	if mv_x==0 and mv_y==0 then
		if btnd(⬅️) 	then nd=0 mv_x=-1 mv_y= 0
		elseif btnd(➡️) then nd=1 mv_x= 1 mv_y= 0
		elseif btnd(⬆️) then nd=2 mv_x= 0 mv_y=-1
		elseif btnd(⬇️) then nd=3 mv_x= 0 mv_y= 1
		end

		if mv_x~=0 or mv_y~=0 then
			if mv>0 then spd=1.4
			else spd=1
			end
		end
	end

	if (mv<=0 and (mv_x~=0 or mv_y~=0)) then
		sfx(0)
		d=nd
		mv=m_mv
		dx+=mv_x dy+=mv_y
		mv_x=0 mv_y=0
	end

end

function update_btns()
	for i=1,#btns do
		btn_i = btns[i]
		cur_btns[btn_i]=btn(btn_i)
		diff_btns[btn_i]=prev_btns[btn_i]~=cur_btns[btn_i]
		prev_btns[btn_i]=cur_btns[btn_i]
	end
end

function btnd(btn_num)
	return diff_btns[btn_num] and cur_btns[btn_num]
end

function _draw()
	cls(3)
	
	if (d == 0) bx=8 by=0
	if (d == 1) bx=-8 by=0
	if (d == 2) bx=0 by=8
	if (d == 3) bx=0 by=-8

	t = mv / m_mv

	m_mv_h = m_mv/2
	jump=m_mv_h-abs(mv-m_mv_h)

	if jump>0.5 then spr_y=8
	else spr_y=0
	end

	sspr(d*8, spr_y, 8, 8, dx*8+bx*t, dy*8+by*t-jump)

	if(mv>0) mv -= spd
end

__gfx__
000000000000000000000000000000000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00087000000780000000800000080000000b30b0000077777700000006666666666666660d66660000500500066666666666666666666600ddddd00000000000
00775000000677000007700000077000000bb0b00007cc7ccc70000006777777777777760d6c6cc00005500067777777777777777777776d66666d0000000000
088777700777788000077000000650000b0b30300007cc7ccc70000006777777777777760d6c6cc000055000677777777777777777777776d66666d000000000
007777700777770000777700007777000b03bb00077777777777777006777777777777760d66666000500500666666666666666666666666dddddddd00000000
00077900009770000077770000777700030bb000077777777777777006711711777777760d61166000050000677777777777777777777776dd66666d00000000
0099990000999900009779000097790000bb300007711777777117700611111116666666dd11116000050000677777777777777777777776dd6c6ccd00000000
000000000000000000000000000000000003b000000110000001100000011011000000000001100000050000677777777777777777777776dd6c6ccd00000000
00000000000000000000000000000000aaaaaaaacccccccc0000000000000000000000000000000000000000677777777777777777777776dd66666d00000000
0008700000078000000080000008000055555555cccccccc4444444444444444000000bbb000000000800800877777777777777777777776dd66666d00000000
0077500000067700000770000007700055555555cccccccc44944444444499440000bbbbbbb0000000055000077777777777777777777776dddddd6900000000
0887777007777880000770000006500055555555cccccccc4444499444444444000bbbbbbbbbb00000055000086666666666666666666666ddd11ddd00000000
0077777007777700007777000077770055555555cccccccc4444444449444444000b3bbbbbb3b0000050050000d1111d11110000000000000d11110000000000
0007790000977000007777000077770055555555cccccccc4994444444444994000bb33bbb33b0000005000000d1111d11110000000000000d11110000000000
0009090000909000000770000007700055555555cccccccc4444444444444444000bbbb33333b00000050000000d1100d11000000000000000d1100000000000
00909000000909000090090000900900aaa5aaa5cccccccc0000000000000000000bbbbb3333b000000500000000000000000000000000000000000000000000
0000000000000000000000000000000055555555000000000000000000000000000bbbbbb333b000000000000000000000000000000000000000000000000000
0000000000000000000000000000000055555555000333000033330000000000000bbbbbb333b000005005000000000000000000000000000000000000000000
000000000000000000000000000000005555555500333b3003333b0000000000000bbbbbb333b000000550000000000000000000000000000000000000000000
00000000000000000000000000000000555555550333b3300b3b333000000000000bbbbbb333b000000550000000000000000000000000000000000000000000
0000000000000000000000000000000055555555033b33300033330000000000000bbbbbb333b000008008000000000000000000000000000000000000000000
000000000000000000000000000000005555555503b333000b333b3000000000000bbbbbb333b000000500000000000000000000000000000000000000000000
00000000000000000000000000000000aaaaaaaa00333000003b333000000000000bbbbbb333b000000500000006666666000000000111111100000000000000
000000000000000000000000000000000000000000000000033333b000000000000bbbbbb333b0000005000000667777766000000011ddddd110000000000000
0000000000000000000000000000000000000000000000000b33330000000000000bbbbbb333b00000000000067766666776660001dd11111dd1110000000000
000000000000000000666000000000000000000000000000003b3330000000000000bb3bb33bb000000000008776cc6cc67777908dd1cc1cc1dddd9000000000
000000000000000006666dd0000000000077aa0000000000003333000000000000000bb333bb0000000000006667cc6ccc666676111dcc1ccc1111d100000000
000000000000000066665ddd0000000007a99a900000000000094000000000000000000bbbb000000000000087777767777777968ddddd1ddddddd9100000000
00000000000000006666555500000000079aaa9000000000000940000000000000000009400000000000000067667767777667761d11dd1dddd11dd100000000
000000000000000066655555000000000aa99a900000000000094000000000000000000940000000000000000611666666611660011111111111111000000000
00000000000000006dd55555000000000044440000000000000440000000000000000009400000000000000000d10000000d100000d10000000d100000000000
00000000000000000ddd555000000000000000000000000000000000000000000000000440000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000007800000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000006770000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000777788000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000777770000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000097700000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000099990000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__sfx__
00010000105500d5500b5500a55009550095500a5500c5500e5501055012550135501555016550185501855017550145500000000000000000000000000000000000000000000000000000000000000000000000
000800002215022150221502210022100221502215022150221502215022150221502215022150221501e1001e100311003110031100311001b1001b1001b100311003110031100311001a1001a1001a10032100
001200002b3502b3402b3302b3202b3102b3002b3002b3402b3302b3202b3102b3102b3002b3002b3502b3402b3302b3202b3102b3002b3002b3402b3302b3202b3102b3102b3002b3002b3002b3002b3002b300
001000000861008610086100862008620086200862008630086300863008630086300863008630086300863008630086300863008630086300863008630086300863008620086200862008620086100861008610
000a00000664002640046400364005640046400564008640066400364005640066400364004640056400464003640066400964004640066400364004640046400264005640036400564004640036400664005640
